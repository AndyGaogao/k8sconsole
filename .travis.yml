sudo: required
dist: trusty
group: edge
language: node_js
node_js:
- 8.6.0
cache:
  directories:
  - node_modules
  - ".tools"
install:
- chmod +x build/*.sh
before_script:
- eval "$(gimme 1.10.2)"
script:
- "./node_modules/.bin/gulp build:cross"
before_deploy:
- mv ./dist/windows/k8sconsole-windows-amd64 ./dist/windows/k8sconsole-windows-amd64.exe
deploy:
  provider: releases
  api-key:
    secure: DRUD+gtCAMrc7KsqfInhuynyMph+oRI1m0+D+LQWITE7rDWdFgX7lwJFQLZdW4JjslI9nzq1hKFO/YmvCw2KlLrYOZ5M/IzWXzbWrdN53qMO8TWWl2hs7Yn+1GhgJlMTznRNPpou1P07dLHGyr7nFX2tCDnYYFlwVvDP/lPkRxSsOIDnoV6CizSftx/v8zfsvM6f7nTH0tP1qzRJhfQ0XlrygijADEEBPL20msBlaUhVaWkiCN4/5G4wBTMAMkzTvhCpnEpXI3qBnqA0yEgJI5Dfe2KTpoAi5Tgh+6TYcu8eJBrDPO6BIHQqQ42pyHUeqpbUflKznGw1BornwAdthwhdTminRpJeBnmnwCEWIohVSjNGWuJoUcG1LkB7FroaDnH81kmJIcXnAhQq55H6wVfF1voYeBz5GfoooxIRhGO6uWbjJMUc7oGcEY9aWI5I+gVD6hbAPCfUejSbqanV843Ajw7dfHa3Uj+eyXh/Wj2dNIsGpINm/a3Qo6nmvElg8Mzk/JDRhOBb2kgX/EfvQVDN3BBxkTk97gfPDmhOdtYETLRhSJykAS28A7+i7o4eZD5/gkbqo31p7kwtxJ7qFzgPAezmwPHfbBIjhOVPEhr7i26pN/1vELLwJ6Vd6/yNB7ZSRX395AQzsATDUAz1IXliSClzb/VrPlcTP+dB/cM=
  file:
    - ./dist/linux/k8sconsole-linux-amd64
    - ./dist/windows/k8sconsole-windows-amd64.exe
    - ./dist/darwin/k8sconsole-darwin-amd64
  skip_cleanup: true
  on:
    repo: hbulpf/k8sconsole
    tags: true